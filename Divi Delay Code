jQuery(document).ready(function ($) {
    var delayTime = 120000; // 2 minutes in milliseconds
    var intervalTime = 30000; // 30 seconds for autoplay before pausing again

    $('.et_pb_slider').each(function () {
        var slider = $(this);
        console.log('Divi Slider Delay Script Loaded');

        // Disable autoplay initially
        slider.attr('data-autoplay', 'false');

        setTimeout(function startAutoplay() {
            slider.attr('data-autoplay', 'true');
            
            if (typeof et_pb_initialize_slider === "function") {
                et_pb_initialize_slider();
            }

            // Set interval to pause autoplay every 2 minutes
            setInterval(function () {
                slider.attr('data-autoplay', 'false');

                // Restart autoplay after a short interval
                setTimeout(function () {
                    slider.attr('data-autoplay', 'true');
                    if (typeof et_pb_initialize_slider === "function") {
                        et_pb_initialize_slider();
                    }
                }, intervalTime); // Short interval before restarting
            }, delayTime + intervalTime); // Repeats every 2 minutes + 30 seconds

        }, delayTime); // Initial 2-minute delay
    });
});
