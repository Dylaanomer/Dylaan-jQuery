jQuery(document).ready(function ($) {
    var delayTime = 120000; // 2 minutes
    var intervalTime = 30000; // 30 seconds
    
    console.log('Divi Delay Script Starting');
    
    $('.et_pb_slider').each(function(index) {
        var slider = $(this);
        console.log('Processing Divi Slider:', index);
        
        // Get the actual slider instance
        var sliderInstance = slider.data('et_pb_simple_slider');
        console.log('Slider Instance:', sliderInstance);
        
        // Immediately stop autoplay
        if (sliderInstance) {
            sliderInstance.stopAutoplay();
            console.log('Initial autoplay stopped');
        }
        
        setTimeout(function() {
            console.log('Starting first autoplay cycle');
            if (sliderInstance) {
                sliderInstance.startAutoplay();
            }
            
            setInterval(function() {
                console.log('Stopping autoplay cycle');
                if (sliderInstance) {
                    sliderInstance.stopAutoplay();
                }
                
                setTimeout(function() {
                    console.log('Restarting autoplay cycle');
                    if (sliderInstance) {
                        sliderInstance.startAutoplay();
                    }
                }, intervalTime);
                
            }, delayTime + intervalTime);
        }, delayTime);
    });
});
